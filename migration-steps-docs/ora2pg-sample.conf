####################  Ora2Pg Configuration file   #####################

ORACLE_HOME  /usr/lib/oracle/12.2/client64

#------------------------------------------------------------------------------
# INPUT SECTION (Oracle connection or input file)
#------------------------------------------------------------------------------

ORACLE_DSN  dbi:Oracle:host=${oracle_ip};sid=${oracle_schema};port=1521
ORACLE_USER  ${oracle_user}
ORACLE_PWD  ${oracle_pass}

USER_GRANTS     1
VERBOSE 2
DEBUG 4

#------------------------------------------------------------------------------
# OUTPUT SECTION (Control output to file or PostgreSQL database)
#------------------------------------------------------------------------------

PG_DSN    dbi:Pg:dbname=${pg_database};host=${pg_ip};port=5432
PG_USER          ${pg_username}
PG_PWD    ${pg_pass}

OUTPUT    output.sql
OUTPUT_DIR  /root/anp_dir/migration/output

FILE_PER_TABLE  0
FILE_PER_FKEYS    0
FILE_PER_INDEX    0
FILE_PER_CONSTRAINT  0

#------------------------------------------------------------------------------
# SCHEMA SECTION (Oracle schema to export and use of schema in PostgreSQL)
#------------------------------------------------------------------------------

EXPORT_SCHEMA  1
SCHEMA    ${oracle_username}
CREATE_SCHEMA  1
COMPILE_SCHEMA  1
PG_SCHEMA       ${pg_schema}
#POSTGIS_SCHEMA  
#TYPE    COPY
DISABLE_COMMENT         0
TRUNCATE_TABLE  0
DROP_IF_EXISTS    0
EXPORT_GTT    0
CONTEXT_AS_TRGM    0
DATADIFF_WORK_MEM  256 MB
DATADIFF_TEMP_BUFFERS  512 MB
KEEP_PKEY_NAMES    0
PKEY_IN_CREATE    0
DISABLE_SEQUENCE  0
DISABLE_TRIGGERS 0
DISABLE_PARTITION  0

#NEED TO TEST
DIRECT_IMPORT  1


#------------------------------------------------------------------------------
# TYPE SECTION (Control type behaviors and redefinitions)
#------------------------------------------------------------------------------

PG_NUMERIC_TYPE  1
PG_INTEGER_TYPE  1
DEFAULT_NUMERIC bigint
TO_NUMBER_CONVERSION  numeric
VARCHAR_TO_TEXT  1
FORCE_IDENTITY_BIGINT  1
TO_CHAR_NOTIMEZONE    1
DATA_LIMIT  10000
#BLOB_LIMIT  500
CLOB_AS_BLOB  1
NOESCAPE  0
TRANSACTION  serializable
USE_LOB_LOCATOR  1
LOB_CHUNK_SIZE  512000
LOG_ON_ERROR    0
TRIM_TYPE    BOTH
INTERNAL_DATE_MAX  49
FUNCTION_CHECK    1
ENABLE_BLOB_EXPORT    1
ENABLE_CLOB_EXPORT    1
PSQL_RELATIVE_PATH  0
DATA_VALIDATION_ROWS   10000
DATA_VALIDATION_ERROR    10
DATA_VALIDATION_ORDERING  1


#------------------------------------------------------------------------------
# PERFORMANCES SECTION (Control export/import performances)
#------------------------------------------------------------------------------

JOBS    1
ORACLE_COPIES  1
PARALLEL_TABLES  1
PARALLEL_MIN_ROWS    100000
SYNCHRONOUS_COMMIT  0


#------------------------------------------------------------------------------
# PLSQL SECTION (Control SQL and PL/SQL to PLPGSQL rewriting behaviors)
#------------------------------------------------------------------------------


EXPORT_INVALID  0
PLSQL_PGSQL  1
EMPTY_LOB_NULL    1
PACKAGE_AS_SCHEMA  1
REWRITE_OUTER_JOIN  1
FUNCTION_STABLE    1


#------------------------------------------------------------------------------
# ASSESSMENT SECTION (Control migration assessment behaviors)
#------------------------------------------------------------------------------

ESTIMATE_COST    1
COST_UNIT_VALUE    5
DUMP_AS_HTML    1
TOP_MAX      10
HUMAN_DAYS_LIMIT  5

#------------------------------------------------------------------------------
# POSTGRESQL FEATURE SECTION (Control which PostgreSQL features are available)
#------------------------------------------------------------------------------

PG_VERSION  16
BITMAP_AS_GIN    1
PG_BACKGROUND    0
PG_SUPPORTS_SUBSTR  1



#------------------------------------------------------------------------------
# SPATIAL SECTION (Control spatial geometry export)
#------------------------------------------------------------------------------
AUTODETECT_SPATIAL_TYPE  1
CONVERT_SRID    1
DEFAULT_SRID    4326
GEOMETRY_EXTRACT_TYPE  INTERNAL
ST_SRID_FUNCTION  ST_SRID
ST_DIMENSION_FUNCTION  ST_DIMENSION
ST_ASBINARY_FUNCTION  ST_ASBINARY
ST_ASTEXT_FUNCTION  ST_ASTEXT
ST_GEOMETRYTYPE_FUNCTION  ST_GEOMETRYTYPE

#------------------------------------------------------------------------------
# FDW SECTION (Control Foreign Data Wrapper export)
#------------------------------------------------------------------------------

#FDW_SERVER  orcl
FDW_IMPORT_SCHEMA  ora2pg_fdw_import
#ORACLE_FDW_PREFETCH  1000
DROP_FOREIGN_SCHEMA    1